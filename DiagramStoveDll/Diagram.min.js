function Rectangle(k,g,l,m){this.X=function(a){if(void 0==a)return k;k=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Y=function(a){if(void 0==a)return g;g=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.W=function(a){if(void 0==a)return l;l=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.H=function(a){if(void 0==a)return m;m=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Rect=function(a){if(void 0==a)return h;k=a.X();g=a.Y();l=a.W();m=a.H()};this.RectParam=function(a,d,f,b){h.X(a);h.Y(d);h.W(f);h.H(b)};var h=this;void 0==k?k=0:h.X(k);void 0==g?g=0:h.Y(g);void 0==l?l=0:h.W(l);void 0==m?m=0:h.H(m)}function PercentColumn(k,g,l,m,h,a,d){function f(){var c=Math.floor(b.H()*h/100);e.RectParam(b.X(),b.Y()+b.H()-c,b.W(),c)}this.Percent=function(c){if(void 0==c)return h;h=isNaN(parseInt(c))||0>parseInt(c)?0:100<parseInt(c)?100:parseInt(c);f()};this.Color=function(c){if(void 0==c)return a;a=-1!=c.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?c.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000"};this.Point=function(c){if(void 0==c)return d;d=isNaN(parseInt(c))||1>parseInt(c)?1:parseInt(c)};this.Rect=function(c){if(void 0==c)return b;b.Rect(c);f()};this.RectParam=function(c,a,r,e){b.RectParam(c,a,r,e);f()};this.Print=function(c){c.fillStyle=a;c.strokeStyle=a;c.strokeRect(b.X(),b.Y(),b.W(),b.H());c.fillRect(e.X(),e.Y(),e.W(),e.H())};this.PrintText=function(c){c.save();c.translate(b.X()+b.W()/2,b.Y()+b.H()/2);c.rotate(3*Math.PI/2);c.fillStyle="#888";c.textAlign="center";c.textBaseline="middle";c.font=(0>b.W()-10?0:t.Rect().W()-10)+"px Arial";c.fillText(h+"%",0,0);c.restore()};var b=new Rectangle(k,g,l,m),e=new Rectangle;void 0==d?d=0:this.Point(d);void 0==a?a="#000":this.Color(a);void 0==h?h=0:this.Percent(h)}function ProcessColumn(k,g,l,m){function h(){for(var c=0,b=0;b<e.length;b++)c+=e[b].Point();return c}function a(){for(var b=1;b<e.length+1;b++)e[b-1].Percent(b<n?100:b==n?c:0)}function d(){for(var c=b.Y()+1,d=e.length-1;0<=d;d--){for(var f=Math.floor((b.H()-(e.length+1))*e[d].Point()/h()),n=d,k,g=k=0;g<e.length;g++)k+=Math.floor((b.H()-(e.length+1))*e[g].Point()/h());k=b.H()-(e.length+1+k);f+=n<k?1:0;e[d].RectParam(b.X()+1,c,b.W()-2,f);c+=f+1}a()}this.Percent=function(b){if(void 0==b)return c;c=isNaN(parseInt(b))||0>parseInt(b)?0:100<parseInt(b)?100:parseInt(b);a()};this.Status=function(b){if(void 0==b)return n;n=isNaN(parseInt(b))||0>parseInt(b)?0:parseInt(b)>e.length?e.length:parseInt(b);a()};this.Rect=function(c){if(void 0==c)return b;b.Rect(c);d()};this.RectParam=function(c,a,e,f){b.RectParam(c,a,e,f);d()};this.AddRStat=function(b,c,a){void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>e.length?e.push(new PercentColumn(0,0,0,0,0,b,c)):e.splice(parseInt(a)-1,0,new PercentColumn(0,0,0,0,0,b,c));d()};this.ChangeRStat=function(b,c,a){void 0!=b&&!isNaN(parseInt(b))&&0<parseInt(b)&&parseInt(b)<=e.length&&(e[parseInt(b)-1].Color(c),e[parseInt(b)-1].Point(a),d())};this.DelRStat=function(b){null==b||void 0==b||0>=b||b>e.length?0<e.length&&e.pop():e.splice(b-1,1);n=0;d()};this.BuildDefault=function(){for(var b=[57,49,49,71,28,49,21,171,114,103],c="#0ff #00f #f00 #0f0 #0ff #00f #8500b6 #f00 #f0f #0f0".split(" "),a=0;a<b.length;a++)f.AddRStat(c[a],b[a]);d()};this.Print=function(c){c.clearRect(b.X()-1,b.Y()-1,b.W()+2,b.H()+2);c.fillStyle="#ddd";c.fillRect(b.X(),b.Y(),b.W(),b.H());for(var a=0;a<e.length;a++)a<n&&e[a].Print(c);c.strokeStyle="#333";c.strokeRect(b.X(),b.Y(),b.W(),b.H())};this.PrintText=function(a){a.save();a.translate(b.X()+b.W()/2,b.Y()+b.H()/2);a.rotate(3*Math.PI/2);a.fillStyle="#888";a.textAlign="center";a.textBaseline="middle";a.font=(0>b.W()-10?0:b.W()-10)+"px Arial";a.fillText(c+"% "+n+"/"+e.length,0,0);a.restore()};var f=this,b=new Rectangle(k,g,l,m),e=[],c=0,n=0}function NumberColumn(k,g,l,m,h){this.Number=function(a){if(void 0==a)return h;h=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Prostoy=function(a){if(void 0==a)return a;d=isNaN(a)||1!=parseInt(a)?0:1};this.Rect=function(d){if(void 0==d)return a;a.Rect(d)};this.RectParam=function(d,b,e,c){a.RectParam(d,b,e,c)};this.Print=function(f){f.fillStyle=0==d?"#ff0":"#ff8000";f.fillRect(a.X(),a.Y(),a.W(),a.H());f.strokeStyle="#333";f.strokeRect(a.X(),a.Y(),a.W(),a.H());f.fillStyle="#000";f.textAlign="center";f.textBaseline="middle";var b=a.H()<a.W()?a.H()-3:a.W()-3;f.font=(0>b?0:b)+"px Arial";f.fillText(h,a.X()+a.W()/2,a.Y()+1+a.H()/2)};var a=new Rectangle(k,g,l,m),d=0;void 0==h?h=0:this.Number(h)}function BlinkStatus(k,g,l,m){this.Status=function(b){if(void 0==b)return f;f=isNaN(b)||0>parseInt(b)?0:parseInt(b)>d.length?d.length:parseInt(b)};this.Rect=function(b){if(void 0==b)return a;a.Rect(b)};this.RectParam=function(b,e,c,d){a.RectParam(b,e,c,d)};this.BuildDefault=function(){for(var b=["#00f","#f00","#0f0"],a=0;a<b.length;a++)h.AddStatus(b[a])};this.AddStatus=function(b,a){var c=-1!=b.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?b.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000";void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>d.length?d.push(c):d.splice(parseInt(a)-1,0,c);f=0};this.ChangeStatus=function(b,a){var c=-1!=b.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?b.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000";void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=d.length&&d.splice(parseInt(a)-1,1,c)};this.DelStatus=function(a){0<d.length&&(void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>d.length?d.splice(parseInt(a)-1,1):d.pop(),f=0)};this.Print=function(b){b.fillStyle=0<f?d[f-1]:"#ddd";b.fillRect(a.X(),a.Y(),a.W(),a.H());b.strokeStyle="#333";b.strokeRect(a.X(),a.Y(),a.W(),a.H())};this.PrintText=function(b){b.fillStyle="#888";b.textAlign="center";b.textBaseline="middle";b.font=(0>a.H()-2?0:a.H()-2)+"px Arial";b.fillText(f+"/"+d.length,a.X()+a.W()/2,a.Y()+a.H()/2+1)};var h=this,a=new Rectangle(k,g,l,m),d=[],f=0}function Diagram(k,g,l,m){function h(){for(var a=e.X()+4,h=e.Y()+4,k=e.Y()+e.H()-34,g=e.Y()+e.H()-21,l=0==d.length?0:(e.W()-2-3*(d.length+1))%d.length,m=e.H()-41,q=0;q<d.length;q++){var p=Math.floor((e.W()-2-3*(d.length+1))/d.length);p=q<l?p+1:p;d[q].RectParam(a,h,p,m);f[q].RectParam(a,k,p,10);b[q].RectParam(a,g,p,17);a+=p+3}}this.minBoardW=function(){return 8*d.length+5};this.minBoardH=function(){return 141};this.Rect=function(b){if(void 0==b)return e;a.RectParam(b.X(),b.Y(),b.W(),b.H())};this.RectParam=function(b,d,f,k){e.RectParam(b,d,f<a.minBoardW()?a.minBoardW():f,k<a.minBoardH()?a.minBoardH():k);h()};this.ProcessCount=function(){return d.length};this.AddStove=function(a,e,k,g){void 0==g||isNaN(parseInt(g))||0>parseInt(g)-1||parseInt(g)-1>d.length?(d.push(a),f.push(e),b.push(k)):(d.splice(parseInt(g)-1,0,a),f.splice(parseInt(g)-1,0,e),b.splice(parseInt(g)-1,0,k));h()};this.ChangeStove=function(a,e,k,g){void 0!=g&&!isNaN(parseInt(g))&&0<parseInt(g)&&parseInt(g)<=d.length&&(d.splice(parseInt(g)-1,0,a),f.splice(parseInt(g)-1,0,e),b.splice(parseInt(g)-1,0,k));h()};this.DelStove=function(a){0<d.length&&(void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>d.length?(d.splice(parseInt(a)-1,1),f.splice(parseInt(a)-1,1),b.splice(parseInt(a)-1,1)):(d.pop(),f.pop(),b.pop()));h()};this.ChangeStatProc=function(a,b,e){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=d.length&&(d[parseInt(a)-1].Status(b),d[parseInt(a)-1].Percent(e))};this.ChangeStatBlink=function(a,b){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=f.length&&f[parseInt(a)-1].Status(b)};this.ChangeStatNumb=function(a,d){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=b.length&&b[parseInt(a)-1].Prostoy(d)};this.BuildDefault=function(){for(;48>d.length;)d.push(new ProcessColumn(0,0,0,0)),d[d.length-1].BuildDefault(),f.push(new BlinkStatus(0,0,0,0)),f[d.length-1].BuildDefault(),b.push(new NumberColumn(0,0,0,0,d.length));h()};this.Print=function(a){a.clearRect(e.X()-1,e.Y()-1,e.W()+2,e.H()+2);a.fillStyle="#ddd";a.fillRect(e.X(),e.Y(),e.W(),e.H());for(var c=0;c<d.length;c++)d[c].Print(a),f[c].Print(a),b[c].Print(a);a.strokeStyle="#333";a.strokeRect(e.X(),e.Y(),e.W(),e.H())};this.PrintText=function(a){for(var b=0;b<d.length;b++)d[b].PrintText(a),f[b].PrintText(a)};var a=this,d=[],f=[],b=[],e=new Rectangle(0,0,0,0);a.RectParam(k,g,l,m)};