function Rectangle(p,m,l,q){this.X=function(a){if(void 0==a)return p;p=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Y=function(a){if(void 0==a)return m;m=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.W=function(a){if(void 0==a)return l;l=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.H=function(a){if(void 0==a)return q;q=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Rect=function(a){if(void 0==a)return f;p=a.X();m=a.Y();l=a.W();q=a.H()};this.RectParam=function(a,d,c,b){f.X(a);f.Y(d);f.W(c);f.H(b)};var f=this;void 0==p?p=0:f.X(p);void 0==m?m=0:f.Y(m);void 0==l?l=0:f.W(l);void 0==q?q=0:f.H(q)};function PercentColumn(p,m,l,q,f,a,d){function c(){var a=Math.floor(b.H()*f/100);e.RectParam(b.X(),b.Y()+b.H()-a,b.W(),a)}this.Percent=function(b){if(void 0==b)return f;f=isNaN(parseInt(b))||0>parseInt(b)?0:100<parseInt(b)?100:parseInt(b);c()};this.Color=function(b){if(void 0==b)return a;a=-1!=b.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?b.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000"};this.Point=function(b){if(void 0==b)return d;d=isNaN(parseInt(b))||1>parseInt(b)?1:parseInt(b)};this.Rect=function(a){if(void 0==a)return b;b.Rect(a);c()};this.RectParam=function(a,e,u,g){b.RectParam(a,e,u,g);c()};this.Print=function(c){c.fillStyle=a;c.strokeStyle=a;c.strokeRect(b.X(),b.Y(),b.W(),b.H());c.fillRect(e.X(),e.Y(),e.W(),e.H())};this.PrintText=function(a){a.save();a.translate(b.X()+b.W()/2,b.Y()+b.H()/2);a.rotate(3*Math.PI/2);a.fillStyle="#888";a.textAlign="center";a.textBaseline="middle";a.font=(0>b.W()-10?0:t.Rect().W()-10)+"px Arial";a.fillText(f+"%",0,0);a.restore()};var b=new Rectangle(p,m,l,q),e=new Rectangle;void 0==d?d=0:this.Point(d);void 0==a?a="#000":this.Color(a);void 0==f?f=0:this.Percent(f)};function ProcessColumn(p,m,l,q){function f(){for(var b=0,a=0;a<e.length;a++)b+=e[a].Point();return b}function a(){for(var b=1;b<e.length+1;b++)e[b-1].Percent(b<n?100:b==n?r:0)}function d(){for(var c=b.Y()+1,g=e.length-1;0<=g;g--){for(var h=Math.floor((b.H()-(e.length+1))*e[g].Point()/f()),v=g,d,k=d=0;k<e.length;k++)d+=Math.floor((b.H()-(e.length+1))*e[k].Point()/f());d=b.H()-(e.length+1+d);h+=v<d?1:0;e[g].RectParam(b.X()+1,c,b.W()-2,h);c+=h+1}a()}this.Percent=function(b){if(void 0==b)return r;r=isNaN(parseInt(b))||0>parseInt(b)?0:100<parseInt(b)?100:parseInt(b);a()};this.Status=function(b){if(void 0==b)return n;n=isNaN(parseInt(b))||0>parseInt(b)?0:parseInt(b)>e.length?e.length:parseInt(b);a()};this.Rect=function(a){if(void 0==a)return b;b.Rect(a);d()};this.RectParam=function(a,c,h,e){b.RectParam(a,c,h,e);d()};this.AddRStat=function(b,a,h){void 0==h||isNaN(parseInt(h))||0>parseInt(h)-1||parseInt(h)-1>e.length?e.push(new PercentColumn(0,0,0,0,0,b,a)):e.splice(parseInt(h)-1,0,new PercentColumn(0,0,0,0,0,b,a));d()};this.ChangeRStat=function(b,a,h){void 0!=b&&!isNaN(parseInt(b))&&0<parseInt(b)&&parseInt(b)<=e.length&&(e[parseInt(b)-1].Color(a),e[parseInt(b)-1].Point(h),d())};this.DelRStat=function(b){null==b||void 0==b||0>=b||b>e.length?0<e.length&&e.pop():e.splice(b-1,1);n=0;d()};this.BuildDefault=function(){for(var b=[57,49,49,71,28,49,21,171,114,103],a="#0ff #00f #f00 #0f0 #0ff #00f #8500b6 #f00 #f0f #0f0".split(" "),h=0;h<b.length;h++)c.AddRStat(a[h],b[h]);d()};this.Print=function(a){a.clearRect(b.X()-1,b.Y()-1,b.W()+2,b.H()+2);a.fillStyle="#ddd";a.fillRect(b.X(),b.Y(),b.W(),b.H());for(var c=0;c<e.length;c++)c<n&&e[c].Print(a);a.strokeStyle="#333";a.strokeRect(b.X(),b.Y(),b.W(),b.H())};this.PrintText=function(a){a.save();a.translate(b.X()+b.W()/2,b.Y()+b.H()/2);a.rotate(3*Math.PI/2);a.fillStyle="#888";a.textAlign="center";a.textBaseline="middle";a.font=(0>b.W()-10?0:b.W()-10)+"px Arial";a.fillText(r+"% "+n+"/"+e.length,0,0);a.restore()};var c=this,b=new Rectangle(p,m,l,q),e=[],r=0,n=0};function BlinkStatus(p,m,l,q){this.Status=function(b){if(void 0==b)return c;c=isNaN(b)||0>parseInt(b)?0:parseInt(b)>d.length?d.length:parseInt(b)};this.Rect=function(b){if(void 0==b)return a;a.Rect(b)};this.RectParam=function(b,c,d,f){a.RectParam(b,c,d,f)};this.BuildDefault=function(){for(var b=["#00f","#f00","#0f0"],a=0;a<b.length;a++)f.AddStatus(b[a])};this.AddStatus=function(b,a){var e=-1!=b.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?b.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000";void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>d.length?d.push(e):d.splice(parseInt(a)-1,0,e);c=0};this.ChangeStatus=function(b,a){var c=-1!=b.search(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)?b.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)[0]:"#000000";void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=d.length&&d.splice(parseInt(a)-1,1,c)};this.DelStatus=function(b){0<d.length&&(void 0==b||isNaN(parseInt(b))||0>parseInt(b)-1||parseInt(b)-1>d.length?d.splice(parseInt(b)-1,1):d.pop(),c=0)};this.Print=function(b){b.fillStyle=0<c?d[c-1]:"#ddd";b.fillRect(a.X(),a.Y(),a.W(),a.H());b.strokeStyle="#333";b.strokeRect(a.X(),a.Y(),a.W(),a.H())};this.PrintText=function(b){b.fillStyle="#888";b.textAlign="center";b.textBaseline="middle";b.font=(0>a.H()-2?0:a.H()-2)+"px Arial";b.fillText(c+"/"+d.length,a.X()+a.W()/2,a.Y()+a.H()/2+1)};var f=this,a=new Rectangle(p,m,l,q),d=[],c=0};function NumberColumn(p,m,l,q,f){this.Number=function(a){if(void 0==a)return f;f=isNaN(parseInt(a))||0>parseInt(a)?0:parseInt(a)};this.Prostoy=function(a){if(void 0==a)return a;d=isNaN(a)||1!=parseInt(a)?0:1};this.Rect=function(c){if(void 0==c)return a;a.Rect(c)};this.RectParam=function(c,b,e,d){a.RectParam(c,b,e,d)};this.Print=function(c){c.fillStyle=0==d?"#ff0":"#ff8000";c.fillRect(a.X(),a.Y(),a.W(),a.H());c.strokeStyle="#333";c.strokeRect(a.X(),a.Y(),a.W(),a.H());c.fillStyle="#000";c.textAlign="center";c.textBaseline="middle";var b=a.H()<a.W()?a.H()-3:a.W()-3;c.font=(0>b?0:b)+"px Arial";c.fillText(f,a.X()+a.W()/2,a.Y()+1+a.H()/2)};var a=new Rectangle(p,m,l,q),d=0;void 0==f?f=0:this.Number(f)};function Diagram(p,m,l,q){function f(){for(var a=g.X()+4,d=g.Y()+4,f=g.Y()+g.H()-34,k=g.Y()+g.H()-21,n=0==c.length?0:(g.W()-2-3*(c.length+1))%c.length,p=g.H()-41,m=0;m<c.length;m++){var l=Math.floor((g.W()-2-3*(c.length+1))/c.length);l=m<n?l+1:l;c[m].RectParam(a,d,l,p);b[m].RectParam(a,f,l,10);e[m].RectParam(a,k,l,17);a+=l+3}}function a(b){for(var h=0;h<c.length;h++)if(1==u[h]){var d=n[h]-r[h];d=0==d?1:d;d=Math.floor(100*(new Date-r[h])/d);c[h].Percent(d);e[h].Prostoy(100<d?1:0)}void 0==b&&setTimeout(a,1E3)}this.minBoardW=function(){return 8*c.length+5};this.minBoardH=function(){return 141};this.Rect=function(a){if(void 0==a)return g;d.RectParam(a.X(),a.Y(),a.W(),a.H())};this.RectParam=function(a,b,c,e){g.RectParam(a,b,c<d.minBoardW()?d.minBoardW():c,e<d.minBoardH()?d.minBoardH():e);f()};this.ProcessCount=function(){return c.length};this.AddStove=function(a,d,g,k){void 0==k||isNaN(parseInt(k))||0>parseInt(k)-1||parseInt(k)-1>c.length?(c.push(a),b.push(d),e.push(g),r.push(new Date),n.push(new Date),u.push(0)):(c.splice(parseInt(k)-1,0,a),b.splice(parseInt(k)-1,0,d),e.splice(parseInt(k)-1,0,g),r.splice(parseInt(k)-1,0,new Date),n.splice(parseInt(k)-1,0,new Date),u.splice(parseInt(k)-1,0,0));f()};this.ChangeStove=function(a,d,g,k){void 0!=k&&!isNaN(parseInt(k))&&0<parseInt(k)&&parseInt(k)<=c.length&&(c.splice(parseInt(k)-1,0,a),b.splice(parseInt(k)-1,0,d),e.splice(parseInt(k)-1,0,g),r.splice(parseInt(k)-1,0,new Date),n.splice(parseInt(k)-1,0,new Date),u.splice(parseInt(k)-1,0,0));f()};this.DelStove=function(a){0<c.length&&(void 0==a||isNaN(parseInt(a))||0>parseInt(a)-1||parseInt(a)-1>c.length?(c.splice(parseInt(a)-1,1),b.splice(parseInt(a)-1,1),e.splice(parseInt(a)-1,1),r.splice(parseInt(a)-1,1),n.splice(parseInt(a)-1,1),u.splice(parseInt(a)-1,1)):(c.pop(),b.pop(),e.pop(),r.pop(),n.pop(),u.pop()));f()};this.ChangeStatProc=function(a,b,d){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=c.length&&(c[parseInt(a)-1].Status(b),void 0!=d&&c[parseInt(a)-1].Percent(d))};this.ChangeStatBlink=function(a,c){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=b.length&&b[parseInt(a)-1].Status(c)};this.ChangeStatNumb=function(a,b){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=e.length&&e[parseInt(a)-1].Prostoy(b)};this.ChangeControllPercent=function(a,b){void 0!=a&&!isNaN(parseInt(a))&&0<parseInt(a)&&parseInt(a)<=u.length&&(u[parseInt(a)-1]=isNaN(parseInt(b))||1!=parseInt(b)?0:1)};this.ChangeStartDate=function(b,c){void 0!=b&&!isNaN(parseInt(b))&&0<parseInt(b)&&parseInt(b)<=r.length&&(r[parseInt(b)-1]=c);a(1)};this.ChangeEndDate=function(b,c){void 0!=b&&!isNaN(parseInt(b))&&0<parseInt(b)&&parseInt(b)<=n.length&&(n[parseInt(b)-1]=c);a(1)};this.BuildDefault=function(){for(;48>c.length;)c.push(new ProcessColumn(0,0,0,0)),c[c.length-1].BuildDefault(),b.push(new BlinkStatus(0,0,0,0)),b[c.length-1].BuildDefault(),e.push(new NumberColumn(0,0,0,0,c.length)),r.push(new Date),n.push(new Date),u.push(1);f()};this.Print=function(a){a.clearRect(g.X()-1,g.Y()-1,g.W()+2,g.H()+2);a.fillStyle="#ddd";a.fillRect(g.X(),g.Y(),g.W(),g.H());for(var d=0;d<c.length;d++)c[d].Print(a),b[d].Print(a),e[d].Print(a);a.strokeStyle="#333";a.strokeRect(g.X(),g.Y(),g.W(),g.H())};this.PrintText=function(a){for(var d=0;d<c.length;d++)c[d].PrintText(a),b[d].PrintText(a)};var d=this,c=[],b=[],e=[],r=[],n=[],u=[],g=new Rectangle(0,0,0,0);d.RectParam(p,m,l,q);setTimeout(a,1E3)};